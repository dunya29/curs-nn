document.querySelector(".preloader")&&setTimeout((()=>{enableScroll(),document.body.classList.add("loaded")}),1400);const header=document.querySelector(".header"),menuMobileBtn=document.querySelector(".menu-mobile__btn"),mobMenu=document.querySelector(".menu-mobile"),iconMenu=document.querySelector(".icon-menu"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector(".success-mod"),errorModal=document.querySelector(".error-mod"),dropdown=document.querySelectorAll(".dropdown");let mm=gsap.matchMedia(),animSpd=400,bp={largeDesktop:1450.98,desktop:1148.98,laptop:1030.98,tablet:700.98,phone:575.98};function sprite(e){return'<svg><use xlink:href="img/svg/sprite.svg#'+e+'"></use></svg>'}function scrollPos(){return window.pageYOffset||document.documentElement.scrollTop}function isPhone(e){return!!e.match(/^\+7 \d{3} \d{3}-\d{2}-\d{2}$/)}function maskEmail(e){const[t,o]=e.split("@");let n="";return n=t.length<=3?t.substring(0,1)+"***":t.substring(0,2)+"***"+t.substring(t.length-1),n+"@"+o}function enableScroll(){document.querySelector(".modal.open")||(document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll"))}function disableScroll(){if(!document.querySelector(".modal.open")){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelector(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll")}}function smoothDrop(e,t,o=!1){let n=o||500;if(t.style.overflow="hidden",t.style.transition=`height ${n}ms ease`,t.style["-webkit-transition"]=`height ${n}ms ease`,e.classList.contains("active")){e.parentNode.classList.remove("expanded");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),n)}),0)}else{e.parentNode.classList.add("expanded"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),n)}),0)}}function tabSwitch(e,t){e.forEach(((o,n)=>{o.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-selected",!1)})),o.classList.add("active"),o.setAttribute("aria-selected",!0),t.forEach((e=>{e.dataset.block===o.dataset.tab?e.classList.contains("active")||(e.classList.add("active"),e.style.opacity="0",setTimeout((()=>{e.style.opacity="1"}),0)):e.classList.remove("active")}))}))}))}const customScroll=document.querySelectorAll(".custom-scroll");let isFirefox="undefined"!=typeof InstallTrigger;isFirefox&&(document.documentElement.style.scrollbarColor="#002848 #dde6ed"),isFirefox&&customScroll&&customScroll.forEach((e=>{e.style.scrollbarColor="#99b9df #dde6ed"}));let lastScroll=scrollPos();window.addEventListener("scroll",(()=>{let e=scrollPos();e>1?(header.classList.add("scroll"),e>lastScroll&&!header.classList.contains("unshow")?header.classList.add("unshow"):e<lastScroll&&header.classList.contains("unshow")&&header.classList.remove("unshow")):header.classList.remove("scroll","unshow"),lastScroll=e}));const switchBlock=document.querySelectorAll(".switch-block");function openModal(e){let t=document.querySelector(".modal.open");disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause())),e.classList.remove("open"),setTimeout((()=>{enableScroll()}),animSpd)}function modalShowBtns(){const e=document.querySelectorAll(".mod-open-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");openModal(document.getElementById(o))}))}))}function modalUnshowBtns(){const e=document.querySelectorAll(".mod-close-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");closeModal(document.getElementById(o))}))}))}function openDropdown(e){e.classList.add("open"),e.setAttribute("aria-expanded",!0),e.querySelectorAll(".dropdown__options input").forEach((t=>{t.addEventListener("change",(t=>{setActiveOption(e)}))})),document.addEventListener("click",(function t(o){e.contains(o.target)||(closeDropdown(e),document.removeEventListener("click",t))}))}function setActiveOption(e){if(e.querySelector(".dropdown__header").classList.add("checked"),e.classList.contains("radio-select")){let t=e.querySelector("input:checked").nextElementSibling.innerHTML;e.querySelector(".dropdown__header span").innerHTML=t,closeDropdown(e)}}function closeDropdown(e){e.classList.remove("open"),e.setAttribute("aria-expanded",!1)}switchBlock&&switchBlock.forEach((e=>{tabSwitch(e.querySelectorAll("[data-tab]"),e.querySelectorAll("[data-block]"))})),modal&&modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)||closeModal(e)})),e.querySelectorAll(".modal__close").forEach((t=>{t.addEventListener("click",(()=>{closeModal(e)}))}))})),modalShowBtns(),modalUnshowBtns(),dropdown&&dropdown.forEach((e=>{e.querySelector(".dropdown__header").addEventListener("click",(()=>{e.classList.contains("open")?closeDropdown(e):openDropdown(e)}))}));const accordion=document.querySelectorAll(".accordion");let readMoreTimeout;function readMoreFunc(){clearTimeout(readMoreTimeout);const e=document.querySelectorAll(".read-more");readMoreTimeout=setTimeout((()=>{e.length&&e.forEach((e=>{let t=e.querySelector(".read-more__btn").getAttribute("data-open"),o=e.querySelector(".read-more__btn").getAttribute("data-close");function n(){e.classList.remove("active"),e.classList.add("more-hidden");let o=e.querySelector(".read-more__content").clientHeight;e.classList.remove("more-hidden");let n=e.querySelector(".read-more__content").clientHeight;e.classList.add("more-hidden"),n>o?(e.classList.add("btn-show"),e.querySelector(".read-more__btn span")&&t&&(e.querySelector(".read-more__btn span").textContent=t)):e.classList.remove("btn-show")}n();let r=window.innerWidth;window.addEventListener("resize",(()=>{r!=window.innerWidth&&(n(),r=window.innerWidth)})),e.querySelector(".read-more__btn").addEventListener("click",(()=>{if(e.classList.contains("active")){e.classList.remove("active");let o=e.querySelector(".read-more__content").clientHeight+"px";e.classList.add("more-hidden");let n=e.querySelector(".read-more__content").clientHeight+"px";e.classList.remove("more-hidden"),e.querySelector(".read-more__content").style.height=o,setTimeout((function(){e.querySelector(".read-more__content").style.height=n,e.querySelector(".read-more__btn span")&&t&&(e.querySelector(".read-more__btn span").textContent=t),setTimeout((()=>{e.classList.add("more-hidden"),e.querySelector(".read-more__content").style.height=null}),500)}),0)}else{e.classList.add("active");let t=e.querySelector(".read-more__content").clientHeight+"px";e.classList.remove("more-hidden");let n=e.querySelector(".read-more__content").clientHeight+"px";e.querySelector(".read-more__content").style.height=t,setTimeout((function(){e.querySelector(".read-more__content").style.height=n,e.querySelector(".read-more__btn span")&&o&&(e.querySelector(".read-more__btn span").textContent=o),setTimeout((()=>{e.querySelector(".read-more__content").style.height=null}),500)}),0)}}))}))}),0)}accordion.length&&accordion.forEach((e=>{e.querySelector(".accordion__header").addEventListener("click",(()=>{e.classList.contains("no-close")||e.parentNode.parentNode.querySelectorAll(".accordion").forEach((t=>{if(t.querySelector(".accordion__header").classList.contains("active")&&(smoothDrop(t.querySelector(".accordion__header"),t.querySelector(".accordion__body")),t.getBoundingClientRect().top<0)){let o=scrollPos()+e.getBoundingClientRect().top-t.querySelector(".accordion__body").clientHeight-header.clientHeight-10;window.scrollTo(0,o)}})),smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"))}))})),readMoreFunc();const blurTexts=document.querySelectorAll(".blur-text");function animate(){document.querySelectorAll("[data-animation]").length&&document.querySelectorAll("[data-animation]").forEach((e=>{if(!e.classList.contains("animated")){let t=e.getBoundingClientRect().top+scrollPos(),o=Math.abs(window.innerHeight-.1*e.offsetHeight),n=o>100?o:100;if(scrollPos()>t-n){let t=e.getAttribute("data-animation");e.classList.add(t),e.classList.add("animated")}}}))}blurTexts&&blurTexts.forEach((e=>{const t=e.innerHTML.split(/(<br>)/g);e.innerHTML="";let o=0;t.forEach(((t,n)=>{if("<br>"===t)e.appendChild(document.createElement("br"));else{let n=t.split(" "),r=document.createElement("span");r.classList.add("lineWrapper"),e.append(r),n.forEach((e=>{if(""!==e.trim()){e.split(" ").forEach((e=>{e=e.replace(/&nbsp;/g," ");let t=document.createElement("span");t.classList.add("wordWrapper"),r.append(t),e.split("").forEach((e=>{if(""!==e.trim()){let n=document.createElement("span");n.innerHTML=e,n.classList.add("char"),n.setAttribute("data-i",o),n.setAttribute("style",`--char-i: ${o}`),t.append(n),o++}else t.innerHTML+="&nbsp;"}))}))}}))}}))})),animate(),window.addEventListener("scroll",animate);const headerNav=document.querySelector(".header__nav");iconMenu&&headerNav&&(iconMenu.addEventListener("click",(()=>{iconMenu.classList.contains("active")?(iconMenu.setAttribute("aria-expanded",!1),iconMenu.setAttribute("aria-label","Открыть меню"),iconMenu.classList.remove("active"),headerNav.classList.remove("open"),enableScroll()):(iconMenu.setAttribute("aria-label","Закрыть меню"),iconMenu.classList.add("active"),headerNav.classList.add("open"),disableScroll())})),window.addEventListener("resize",(()=>{window.innerWidth>bp.largeDesktop&&iconMenu.classList.contains("active")&&iconMenu.click()})));const introVideo=document.querySelector(".intro video");if(introVideo){let e=gsap.timeline({ease:"none",duration:1,scrollTrigger:{trigger:introVideo,start:"top top",end:"bottom start",scrub:!0,invalidateOnRefresh:!0,scrubs:!0}});e.to(introVideo,{scale:1.7,yPercent:20}),e.to(document.querySelector(".intro .media-cover-bg"),{y:0})}const aboutContainer=document.querySelector(".about__container"),aboutRibbons=document.querySelector(".about__ribbons"),aboutItems=document.querySelectorAll(".about .item-about");if(aboutContainer&&aboutRibbons){let t=gsap.timeline({scrollTrigger:{trigger:aboutContainer,start:"top+=200 bottom",invalidateOnRefresh:!0},onComplete:()=>{aboutRibbons.style.opacity=.2,gsap.to(aboutContainer,{opacity:1,ease:"power2.out",duration:.5,onComplete:()=>{aboutContainer.classList.add("text-animating"),aboutItems.length&&setTimeout((()=>{aboutItems.forEach(((e,t)=>{gsap.to(e,{opacity:1,ease:"power2.out",duration:1,delay:.3*t})}))}),300)}})}});aboutRibbons.querySelectorAll(".about__ribbons-path").forEach(((e,o)=>{let n=e.getTotalLength();e.style.strokeDasharray=n+"px",e.style.strokeDashoffset=n+"px",t.to(e,{strokeDashoffset:0,ease:"none",duration:1},.2*o)}))}const eventsWrapper=document.querySelector(".events__wrapper"),eventsMod=document.querySelector("#event-modal"),eventsModContentWrapper=document.querySelector("[data-event-mod-content]"),eventsCol=document.querySelectorAll(".events .swiper-slide"),eventsFilter=document.querySelector(".events__filter"),eventsCalendar=document.querySelector(".events .datepicker"),filterSelected=document.querySelector(".filter-selected__items");let eventsDatepicker,eventsFilterObj;function initEventsSwiper(){const e=document.querySelector(".events .swiper"),t=document.querySelector(".events .swiper-nav");e&&(new Swiper(e,{slidesPerView:1,spaceBetween:16,observer:!0,observeParents:!0,watchSlidesProgress:!0,navigation:{prevEl:document.querySelector(".events .nav-btn--prev"),nextEl:document.querySelector(".events .nav-btn--next")},breakpoints:{1450.98:{slidesPerView:4,spaceBetween:30},1148.98:{slidesPerView:3,spaceBetween:20},1030.98:{slidesPerView:3,spaceBetween:16},700.98:{slidesPerView:2,spaceBetween:16}},speed:800}),t&&(e?t.classList.remove("hidden"):t.classList.add("hidden")))}if(eventsFilter&&filterSelected&&(eventsFilterObj={checkInp:function(e){e.checked=!0,e.setAttribute("checked",!0)},uncheckInp:function(e){e.checked=!1,e.removeAttribute("checked")},setSelected:function(e){let t=e.parentNode.querySelector("span:last-child").textContent,o=e.getAttribute("data-id"),n=e.getAttribute("data-name"),r=n?n+" "+t.toLowerCase():t;filterSelected.insertAdjacentHTML("afterbegin",`<li data-target="${o}">${r}<button class="btn-cross"></button></li>`)},removeSelected:function(e){filterSelected.querySelector(`[data-target="${e}"]`)&&filterSelected.querySelector(`[data-target="${e}"]`).remove()},selectedOnClick:function(e){filterSelected.querySelectorAll("li").forEach((t=>{if(t.querySelector(".btn-cross").contains(e.target)){let e=t.getAttribute("data-target");eventsFilter.querySelector(`label input[data-id='${e}']`).click()}}))}},eventsFilter.querySelectorAll("label input").forEach((e=>{e.checked&&eventsFilterObj.setSelected(e)})),eventsFilter.addEventListener("click",(e=>{eventsFilter.querySelector("label input")&&eventsFilter.querySelectorAll("label input").forEach((t=>{if(t.contains(e.target)){let e=t.getAttribute("data-id");"checkbox"===t.type?t.checked?eventsFilterObj.setSelected(t):eventsFilterObj.removeSelected(e):"radio"===t.type&&(eventsFilter.querySelectorAll(`input[name='${t.name}']`).forEach((e=>eventsFilterObj.removeSelected(e.getAttribute("data-id")))),eventsFilter.setSelected(t))}}))})),filterSelected.addEventListener("click",(e=>eventsFilterObj.selectedOnClick(e)))),initEventsSwiper(),eventsWrapper&&eventsWrapper.addEventListener("click",(e=>{document.querySelectorAll(".item-event").forEach((t=>{if(t.contains(e.target)){const e=t.querySelector(".item-event__mod");e&&(eventsModContentWrapper.innerHTML=e.innerHTML,readMoreFunc(),openModal(eventsMod))}}))})),eventsCalendar&&(eventsDatepicker=new AirDatepicker(eventsCalendar,{onSelect(){eventsFilter.submit()}})),eventsWrapper&&eventsCol.length){let o=gsap.timeline({scrollTrigger:{trigger:eventsWrapper,start:"top+=200 bottom",invalidateOnRefresh:!0,toggleActions:"play none play none"}});eventsCol.forEach(((e,t)=>{o.from(e,{xPercent:30,opacity:0,ease:"back.out",duration:1},.2*t)}))}const newsSwiperEl=document.querySelector(".news__swiper");if(newsSwiperEl){let n,r;function initNewsSwiper(){window.innerWidth<=bp.laptop&&!r?(r=!0,n=new Swiper(newsSwiperEl.querySelector(".swiper"),{slidesPerView:1,spaceBetween:16,observer:!0,observeParents:!0,watchSlidesProgress:!0,breakpoints:{575.98:{slidesPerView:2,spaceBetween:20}},pagination:{el:newsSwiperEl.querySelector(".swiper-pagination"),type:"bullets",clickable:!0},speed:800})):window.innerWidth>bp.laptop&&r&&(r=!1,n.destroy())}initNewsSwiper(),window.addEventListener("resize",initNewsSwiper)}const newsSlide=document.querySelectorAll(".news__slide");if(newsSlide.length){let l=gsap.timeline({scrollTrigger:{trigger:newsSwiperEl,start:"top center",invalidateOnRefresh:!0,toggleActions:"play none play none"}});newsSlide.forEach(((e,t)=>{l.from(e,{y:50,opacity:0,ease:"back.out",duration:1},.1*t)}))}const projectsSwiper=document.querySelector(".projects .swiper");projectsSwiper&&new Swiper(projectsSwiper,{slidesPerView:1,spaceBetween:16,observer:!0,observeParents:!0,centeredSlides:!0,watchSlidesProgress:!0,initialSlide:projectsSwiper.querySelectorAll(".swiper-slide").length>2?1:0,effect:"coverflow",coverflowEffect:{rotate:0,stretch:0,depth:110,modifier:1,slideShadows:!0},navigation:{prevEl:document.querySelector(".projects .nav-btn--prev"),nextEl:document.querySelector(".projects .nav-btn--next")},breakpoints:{1450.98:{slidesPerView:1.48,spaceBetween:80},1030.98:{slidesPerView:1.185,spaceBetween:80},700.98:{slidesPerView:1,spaceBetween:60},479.98:{slidesPerView:1.4,spaceBetween:40}},speed:800});const newsPopup=document.querySelector(".news-popup");newsPopup&&newsPopup.querySelector(".news-popup__close").addEventListener("click",(()=>newsPopup.classList.add("hidden")));